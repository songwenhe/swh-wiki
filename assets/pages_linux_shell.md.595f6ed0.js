import{_ as t,c as s,o as a,Q as l}from"./chunks/framework.8adc4ca2.js";const D=JSON.parse('{"title":"shell","description":"","frontmatter":{"title":"shell","order":2},"headers":[],"relativePath":"pages/linux/shell.md","lastUpdated":1682093312000}'),e={name:"pages/linux/shell.md"},o=l('<h1 id="shell" tabindex="-1">shell <a class="header-anchor" href="#shell" aria-label="Permalink to &quot;shell&quot;">​</a></h1><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">command</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">#直接让作业进入后台运行</span></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">ctrl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">z</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">#将当前的作业切换到后台</span></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">job</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 查看后台作业状态</span></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">fg</span><span style="color:#A6ACCD;"> %n </span><span style="color:#676E95;font-style:italic;">#让后台的作业n切换到前台来</span></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">bg</span><span style="color:#A6ACCD;"> %n </span><span style="color:#676E95;font-style:italic;">#让前台运行的作业到后台运行</span></span></code></pre></div><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">kill %n</span></span></code></pre></div><p>​ 移除指定的作业 n</p><p>​ n 为 jobs 命令查看到的编号，不是进程 id</p><p>​ 通过 jobs 来管理作业，当前终端的作业在其他终端不可见。</p><h2 id="正则表达式" tabindex="-1">正则表达式 <a class="header-anchor" href="#正则表达式" aria-label="Permalink to &quot;正则表达式&quot;">​</a></h2><h3 id="基本正则表达式-bre" tabindex="-1">基本正则表达式 BRE <a class="header-anchor" href="#基本正则表达式-bre" aria-label="Permalink to &quot;基本正则表达式 BRE&quot;">​</a></h3><table><thead><tr><th>^</th><th>尖角号，用于模式的最左侧，如&quot;^osdboy&quot;，匹配以 oldbody 单词开头的行</th></tr></thead><tbody><tr><td>$</td><td>美元符，用于模式的最右侧，如&quot;osdboy$&quot;，匹配以 oldbody 单词结尾的行</td></tr><tr><td>^$</td><td>组合符，表示空行</td></tr><tr><td>.</td><td>匹配任意一个且只有一个字符，不能匹配空行</td></tr><tr><td>\\</td><td>转义字符，让特殊含义的字符，现出原形，还原本意，例如<code>\\.</code>代表小数点</td></tr><tr><td>*</td><td>匹配前一个字符（连续出现）0 次或 1 次以上，重复 0 次代表空，即匹配所有内容</td></tr><tr><td>.*</td><td>组合符，匹配所有内容</td></tr><tr><td>^.*</td><td>组合符，匹配任意多个字符开头的内容</td></tr><tr><td>.*$</td><td>组合符，匹配以任意多个字符结尾的内容</td></tr><tr><td>[abc]</td><td>匹配[]集合内的任意一个字符，a 或 b 或 c，可以写成[a-c]</td></tr><tr><td>[^abc]</td><td>匹配除了^后面的任意字符，a 或 b 或 c，^表示对[abc]的取反</td></tr></tbody></table><h3 id="扩展正则表达式-ere" tabindex="-1">扩展正则表达式 ERE <a class="header-anchor" href="#扩展正则表达式-ere" aria-label="Permalink to &quot;扩展正则表达式 ERE&quot;">​</a></h3><table><thead><tr><th>+</th><th>匹配前一个字符 1 次或多次</th></tr></thead><tbody><tr><td>[😕]+</td><td>匹配括号内的&quot;:&quot;或者&quot;/&quot;字符 1 次或者多次</td></tr><tr><td>?</td><td>匹配前一个字符 0 次或 1 次</td></tr><tr><td>\\</td><td>表示或者，同时过滤多个字符串</td></tr><tr><td>()</td><td>分组过滤，被括起来的内容表示一个整体</td></tr><tr><td><code>a{n,m}</code></td><td>匹配前一个字符最少 n 次，最多 m 次</td></tr><tr><td><code>a{n,}</code></td><td>匹配前一个字符最少 n 次</td></tr><tr><td><code>a{n}</code></td><td>匹配前一个字符正好 n 次</td></tr><tr><td><code>a{,m}</code></td><td>匹配前一个字符最多 m 次</td></tr></tbody></table><h2 id="grep" tabindex="-1">grep <a class="header-anchor" href="#grep" aria-label="Permalink to &quot;grep&quot;">​</a></h2><p>文本搜索工具，根据用户指定的&quot;模式（过滤条件）&quot;对文本逐行进行匹配，打印匹配到的行</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">pattern</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">file</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">#options 是参数，pattern 是匹配模式</span></span></code></pre></div><table><thead><tr><th>options</th><th>Description</th></tr></thead><tbody><tr><td>-v</td><td>排除匹配的结果，反向匹配</td></tr><tr><td>-n</td><td>显示匹配行与行号</td></tr><tr><td>-i</td><td>不区分大小写</td></tr><tr><td>-c</td><td>只统计匹配的行数</td></tr><tr><td>-E</td><td>使用 egrep 命令</td></tr><tr><td>--color=auto</td><td>为 grep 过滤结果添加颜色</td></tr><tr><td>-w</td><td>只匹配过滤的单词</td></tr><tr><td>-o</td><td>只输出匹配的内容</td></tr></tbody></table><h2 id="sed" tabindex="-1">sed <a class="header-anchor" href="#sed" aria-label="Permalink to &quot;sed&quot;">​</a></h2><p>sed 是操作、过滤和转换文本内容的强大工具。常用功能包括结合正则表达式对文件实现快速增删改查，其中查询功能中最常用的两大功能是过滤、取行。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">sed</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">sed的内置命令</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">file</span><span style="color:#89DDFF;">]</span></span></code></pre></div><table><thead><tr><th>options</th><th>Description</th></tr></thead><tbody><tr><td>-n</td><td>取消默认 sed 的输出，常与 sed 内置命令 p 一起用</td></tr><tr><td>-i</td><td>直接将修改结果写入文件，不用-i，sed 修改的是内存数据</td></tr><tr><td>-e</td><td>多次编辑，不需要管道符了</td></tr><tr><td>-r</td><td>支持正则扩展</td></tr></tbody></table><p>sed 的<code>内置命令字符</code>用于对文件进行不同的操作功能，如对文件增删改查</p><p>sedd 常用<code>内置命令字符</code></p><table><thead><tr><th>a</th><th>append，对文本追加，在指定行后面添加一行/多行文本</th></tr></thead><tbody><tr><td>d</td><td>delete，删除匹配行</td></tr><tr><td>i</td><td>insert，表示插入文本，在指定行前添加一行/多行文本</td></tr><tr><td>p</td><td>print，打印匹配行的内容，通常 p 与-n 一起用</td></tr><tr><td>s/正则/替换内容/g</td><td>匹配正则内容，然后替换内容（支持正则），结尾 g 代表全局匹配</td></tr></tbody></table><p>sed 匹配范围</p><table><thead><tr><th>空地址</th><th>全文处理</th></tr></thead><tbody><tr><td>单地址</td><td>指定文件某一行</td></tr><tr><td>/pattern/</td><td>被模式匹配到的每一行</td></tr><tr><td>范围区间</td><td>10,20 10 到 20 行，10，+5 第 10 行向下 5 行，/pattern1/，/pattern2/</td></tr><tr><td>步长</td><td>1~2，表示 1、3、5、7、9 行，2~2 两个步长，表示 2、4、6、8、10、偶数行</td></tr></tbody></table><h2 id="awk" tabindex="-1">awk <a class="header-anchor" href="#awk" aria-label="Permalink to &quot;awk&quot;">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">awk options &#39;pattern[action]&#39; file</span></span></code></pre></div><h2 id="shell-命令合集" tabindex="-1">shell 命令合集 <a class="header-anchor" href="#shell-命令合集" aria-label="Permalink to &quot;shell 命令合集&quot;">​</a></h2><h3 id="磁盘空间不足-需快速定位日志目录" tabindex="-1">磁盘空间不足，需快速定位日志目录 <a class="header-anchor" href="#磁盘空间不足-需快速定位日志目录" aria-label="Permalink to &quot;磁盘空间不足，需快速定位日志目录&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">du</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-x</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--max-depth=1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">sort</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-k1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-nr</span></span></code></pre></div><p>du 命令中</p><p>-x 参数表示跳过其他文件系统</p><p>--max-depth 参数设置为 1，可以统计出跟目录下第一级目录中所有文件大小</p><p>sort 命令中</p><p>-k 参数指明具体按照哪一列进行排序</p><p>-n 参数表示只对数值进行排列</p><p>-r 参数表示反向排序</p><p>整体分析 sort 这一段命令的意思就是指定第一列并安装数据大小做反向排序</p><h3 id="系统产生很多碎片文件-导致-inode-资源不足" tabindex="-1">系统产生很多碎片文件，导致 inode 资源不足 <a class="header-anchor" href="#系统产生很多碎片文件-导致-inode-资源不足" aria-label="Permalink to &quot;系统产生很多碎片文件，导致 inode 资源不足&quot;">​</a></h3><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">find</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-type</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">f</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">awk</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-F</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">OFS=/</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">{$NF=&quot;&quot;;dir[$0]++}END{for(i in dir)print dir[i]&quot; &quot;i}</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">sort</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-k1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-nr</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">head</span></span></code></pre></div><p>find 命令通过-type-f 参数查找指定文件类型的文件，然后将查找结果通过管道符传递给 awk -F/指定处理文件时字符串之间以/进行分割，-v OPS=/表示文件显示结果时以/进行分割展示，awk 命令整体规则而言有一个{}END{}格式，面前的{}表示行处理操作，END{}表示行处理后需要进行整体结果行处理操作逻辑中，设置$NF 为空表示将每一行的文件名信息去除，只保留目录路径，dir 是一个自增数组，用于统计结果最后通过 for 循环进行遍历输出 dir 关联数组中所有行信息</p><h4 id="批量查找文件作内容替换" tabindex="-1">批量查找文件作内容替换 <a class="header-anchor" href="#批量查找文件作内容替换" aria-label="Permalink to &quot;批量查找文件作内容替换&quot;">​</a></h4><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">find</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./-type</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">f</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-name</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">consumer.xml</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-i</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">s/aaaaaa/bbbbbb/g</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">\\</span></span></code></pre></div><p>find 命令中</p><p>-name 参数指定查找的文件名</p><p>-exec 参数将查找到的内容传递给下一个命令去继续执行相关逻辑</p><p>sed 命令主要对文件内容进行替换，这里会将 consumer 文件中的 aaaaaa 替换成 bbbbbb</p>',50),n=[o];function p(r,d,c,i,h,y){return a(),s("div",null,n)}const A=t(e,[["render",p]]);export{D as __pageData,A as default};
